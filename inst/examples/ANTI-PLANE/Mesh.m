% knots = {[0 0 0 1 1 1],[0 0 0 1 1 1]};
% %knots = {[0,0,0,1,1,2,2,3,3,4,4,4],[0,0,0,1,1,2,2,3,3,4,4,4]};
% coefs = zeros(4,3,3);
% coefs(:, 1, 1) = [1, 0, 0, 1];
% coefs(:, 2, 1) = [1/sqrt(2), -1/sqrt(2), 0 , 1/sqrt(2)];
% coefs(:, 3, 1) = [0, -1, 0 ,1 ];
% coefs(:, 1, 2) = [1/sqrt(2), 1/sqrt(2), 0, 1/sqrt(2)];
% coefs(:, 2, 2) = [0, 0, 0, sqrt(2)-1];
% coefs(:, 3, 2) = [-1/sqrt(2), -1/sqrt(2), 0, 1/sqrt(2)];
% coefs(:, 1, 3) = [0, 1, 0, 1];
% coefs(:, 2, 3) = [-1/sqrt(2), 1/sqrt(2), 0, 1/sqrt(2)];
% coefs(:, 3, 3) = [-1, 0, 0, 1];
% srf = nrbmak(coefs, knots);
% 
% 
% figure
% nrbctrlplot(srf)
% figure
% nrbkntplot(srf)


% %demo
% pnts = [0.5 1.5 4.5 3.0 7.5 6.0 8.5;
%         3.0 5.5 5.5 1.5 1.5 4.0 4.5;
%         0.0 0.0 0.0 0.0 0.0 0.0 0.0];
% crv = nrbmak(pnts,[0 0 0 1/4 1/2 3/4 3/4 1 1 1]);
% nrbplot(crv,100)
% title('Test curve')
% hold off


%demo
pnts = zeros(3,5,5);
pnts(:,:,1) = [ 0.0  3.0  5.0  8.0 10.0; 
                0.0  0.0  0.0  0.0  0.0; 
                2.0  2.0  7.0  7.0  8.0];
pnts(:,:,2) = [ 0.0  3.0  5.0  8.0 10.0;
                3.0  3.0  3.0  3.0  3.0;
                0.0  0.0  5.0  5.0  7.0];
pnts(:,:,3) = [ 0.0  3.0  5.0  8.0 10.0;
                5.0  5.0  5.0  5.0  5.0;
                0.0  0.0  5.0  5.0  7.0];
pnts(:,:,4) = [ 0.0  3.0  5.0  8.0 10.0;
                8.0  8.0  8.0  8.0  8.0;
                5.0  5.0  8.0  8.0 10.0];
pnts(:,:,5) = [ 0.0  3.0  5.0  8.0 10.0;
               10.0 10.0 10.0 10.0 10.0;
                5.0  5.0  8.0  8.0 10.0];

knots{1} = [0 0 0 1/3 2/3 1 1 1];
knots{2} = [0 0 0 1/3 2/3 1 1 1];

srf = nrbmak(pnts,knots);
nrbplot(srf,[20 20])
title('Test surface')
hold off